var h,aa=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b},ba=function(a,b){function c(){}c.prototype=b.prototype;a.Ib=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Gb=function(a,c,g){for(var d=Array(arguments.length-2),f=2;f<arguments.length;f++)d[f-2]=arguments[f];return b.prototype[c].apply(a,d)}};var l={},m={},ca=!1,p=function(a){try{ca&&window.console&&window.console.log&&window.console.log(a)}catch(b){}},q=function(a,b){if(!a)return-1;if(a.indexOf)return a.indexOf(b,void 0);for(var c=0,f=a.length;c<f;c++)if(a[c]===b)return c;return-1},t=function(a,b){function c(){}if(!a)throw"Child class cannot be empty.";if(!b)throw"Parent class cannot be empty.";c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},da=function(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var f=a[c];
if(null===f||void 0===f)f="";b.push(encodeURIComponent(c)+"="+encodeURIComponent(f))}return b.join("&")},ea=function(a){a=(new RegExp("[&#]"+a+"=([^&]*)")).exec(window.location.hash);return null==a?"":decodeURIComponent(a[1].replace(/\+/g," "))},fa=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else throw"Add event handler for "+b+" failed.";},ga=function(a,b){a=(a||"").split(" ");b=(b||"").split(" ");for(var c=0;c<b.length;c++)if(b[c]&&
0>q(a,b[c]))return!1;return!0},ha=function(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")&&8==parseInt(a.split("msie")[1],10)},ia=function(){return Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject},ja=function(){var a=navigator.userAgent;return!!a&&/Edge\/\d+/.test(a)},ka=function(){var a=navigator.userAgent,b;if(b=!!a&&-1!=a.indexOf("CriOS"))b=-1,(a=a.match(/CriOS\/(\d+)/))&&a[1]&&(b=parseInt(a[1],10)||-1),b=48>b;return b},u=function(a){this.Ra=a||
[];this.F={}};u.prototype.addEventListener=function(a,b){if(!(0<=q(this.Ra,a)))throw"Unrecognized event type: "+a;if("[object Function]"!==Object.prototype.toString.call(b))throw"The listener for event '"+a+"' is not a function.";this.F[a]||(this.F[a]=[]);0>q(this.F[a],b)&&this.F[a].push(b)};u.prototype.dispatchEvent=function(a){var b=a.type;if(!(b&&0<=q(this.Ra,b)))throw"Failed to dispatch unrecognized event type: "+b;if(this.F[b]&&this.F[b].length)for(var c=0,f=this.F[b].length;c<f;c++)this.F[b][c](a)};
var l=l||{},v=function(){};v.prototype.da=function(){throw Error("unimplemented abstract method");};v.prototype.getItem=function(a,b){b(this.da(a))};v.prototype.setItem=function(){throw Error("unimplemented abstract method");};v.prototype.removeItem=function(){throw Error("unimplemented abstract method");};var w=function(){};t(w,v);w.prototype.V=function(a){this.aa=a||window.localStorage};w.prototype.da=function(a){return this.aa.getItem(a)};
w.prototype.setItem=function(a,b,c){void 0===b||null===b?this.aa.removeItem(a):this.aa.setItem(a,b);c&&c()};w.prototype.removeItem=function(a,b){this.aa.removeItem(a);b&&b()};var x=function(){};x.prototype.V=function(a){var b=this,c=window.indexedDB.open("oauth");c.onsuccess=function(c){b.oa=c.target.result;a()};c.onupgradeneeded=function(a){a.target.result.createObjectStore("oauth")}};
x.prototype.getItem=function(a,b){var c=this.oa.transaction("oauth","readwrite").objectStore("oauth").get(a);c.onsuccess=function(){b(c.result)}};x.prototype.setItem=function(a,b,c){var f=this.oa.transaction("oauth","readwrite").objectStore("oauth");if(void 0===b||null===b)f["delete"](a);else f.put(b,a);f.transaction.oncomplete=function(){c&&c()}};
x.prototype.removeItem=function(a,b){var c=this.oa.transaction("oauth","readwrite").objectStore("oauth");c["delete"](a);c.transaction.oncomplete=function(){b&&b()}};var y=function(){};t(y,v);y.prototype.V=function(){this.xa={}};y.prototype.da=function(a){return this.xa[a]||null};y.prototype.setItem=function(a,b,c){this.xa[a]=b;c&&c()};y.prototype.removeItem=function(a,b){delete this.xa[a];b&&b()};var z=function(){};t(z,v);z.prototype.V=function(a){this.ca=a||window.sessionStorage};
z.prototype.da=function(a){return this.ca.getItem(a)};z.prototype.setItem=function(a,b,c){void 0===b||null===b?this.ca.removeItem(a):this.ca.setItem(a,b);c&&c()};z.prototype.removeItem=function(a,b){this.ca.removeItem(a);b&&b()};var A=function(a){this.Na=a;u.call(this,["storageValueChanged"])};t(A,u);var la=function(a,b){l.Z.getItem(a.Na,b)};A.prototype.addListener=function(a){this.addEventListener("storageValueChanged",a)};
A.prototype.start=function(){var a=this;la(this,function(b){a.rb=b;a.Oa=0;a.sa=window.setInterval(ma(a),200)})};A.prototype.stop=function(){void 0!==this.sa&&(clearInterval(this.sa),this.sa=void 0)};
var ma=function(a){return function(){a.Oa++;la(a,function(b){b!=a.rb?(a.dispatchEvent({type:"storageValueChanged",key:a.Na,newValue:b}),a.stop()):1500<=a.Oa&&a.stop()})}},na=function(a){var b=0,c,f,d;if(a)for(c=0,d=a.length;c<d;c++)f=a.charCodeAt(c),b=(b<<5)-b+f,b|=0;return b},C=function(a){return!!a&&0<=a.indexOf(B.l)},oa=function(a,b){if(!a&&!b)return!0;if(!a||!b)return!1;a=a.extraQueryParams;b=b.extraQueryParams;if(!a&&!b)return!0;if(!a||!b||Object.keys&&Object.keys(a).length!=Object.keys(b).length)return!1;
for(var c in a)if(a[c]!==b[c])return!1;if(!Object.keys)for(c in b)if(a[c]!==b[c])return!1;return!0},B=B||{};B.ja="SID";B.Fa="SSID";B.Ta=100;B.Ha="/oauth2/sessionstate/action/updateState";B.Aa="/oauth2/sessionstate/action/checkOrigin";B.Da="/oauth2/permission/action/refresh";B.ia="/oauth2/permission/action/listSessions";B.Wa="/o/oauth2/revoke";B.l="::";B.ha="_ss_";B.Ca="_tr_";B.ka="oauth2_ss";B.Ba="oauth2_cs";B.Ga="oauth2_tr";B.Ua="oauth2_is";B.fa="oauth2_ar";
B.Eb=function(){var a={ha:1,Ca:2,ka:3,Ba:4,Ga:5,fa:6},b;for(b in a)if(a=B[b],!a||0<=a.indexOf(B.l))throw"Invalid value for 'oauth2.spi."+b+"'.";};B.Eb();B.Va=512;B.Xa=function(a){var b;(b=void 0===a.hint)||(b=a.hint,b=(""===b?!0:b?"string"==typeof b||"object"==typeof b&&b.constructor===String:!1)&&a.hint.length<=B.Va);return!a.id&&b};B.hb=function(){return"https:"==window.location.protocol?B.Fa:B.ja};m=m||{};
m.N=function(a){var b,c=m.fb();c&&(a=c.match("(^|;) ?"+a+"=([^;]*)(;|$)"))&&2<a.length&&(b=a[2]);return b};m.eb=function(a){var b;(a=m.N(a))&&(b=String(na(a)));return b};m.fb=function(){return document.cookie};m.ga="cookieValueChanged";var pa=function(a,b){this.Ja=a;this.kb=b;u.call(this,[m.ga])};t(pa,u);pa.prototype.N=function(){return m.N(this.Ja)};var D=function(a){return m.eb(a.Ja)};pa.prototype.addListener=function(a){this.addEventListener(m.ga,a)};
var ra=function(a){void 0!==a.ya&&(window.clearInterval(a.ya),a.ya=void 0,p("IDP Session Cookie monitor is stoped."));a.ba=a.N();a.ya=window.setInterval(qa(a),a.kb);p("IDP Session Cookie monitor is started.")},qa=function(a){return function(){var b=a.N();if(a.ba!=b){var c={type:m.ga,newHash:b&&na(b),oldHash:a.ba&&na(a.ba)};a.ba=b;a.dispatchEvent(c)}}},sa=function(a,b){this.b=a;this.Sa=b},ta=function(a,b,c){var f=B.Wa,d=new XMLHttpRequest;d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var a;
d.responseText&&(a=window.JSON.parse(d.responseText));c(a)}};d.open("POST",f,!0);d.setRequestHeader("Content-type","application/x-www-form-urlencoded");var g="xsrfToken=";a.Sa&&(g+=a.Sa);if(b)for(var e in b)e&&b[e]&&(g+="&"+e+"="+encodeURIComponent(b[e]));p("Call "+f+" with postData: "+g);d.send(g)},E=function(a,b,c,f,d){var g=new XMLHttpRequest;g.onreadystatechange=function(){if(4==g.readyState&&200==g.status){var a;g.responseText&&(a=window.JSON.parse(g.responseText));f(a)}};if(b=da(b))a+=0>a.indexOf("?")?
"?":"&",a+=b;g.open("GET",a,!0);d&&(g.withCredentials=!0);if(c)for(var e in c)if(c.hasOwnProperty(e)){d=c[e];if(null===d||void 0===d)d="";g.setRequestHeader(e,d)}p("Call "+a+" with Get method.");g.send()},ua=function(a,b,c){E(B.Aa,{origin:a.b,client_id:b},null,c,!1)},va=function(a,b,c){b&&b.length?E(B.Ha,{login_hint:b.join(" "),origin:a.b},null,c,!1):c({activeHints:{}})},wa=function(a,b,c){b.origin=a.b;delete b.redirect_uri;delete b.app_package_name;E(B.Da,b,null,c,!1)},xa=function(a,b,c){b.origin=
a.b;b.redirect_uri=void 0;b.response_type=void 0;b.app_package_name=void 0;E(B.ia,b,null,c,!1)},ya=function(a,b,c){ta(a,{token:b},c)},l=l||{},za=function(){};za.prototype.w=function(){return!1};var Aa={};l.tb=function(){var a=new F;if(!a)throw"policy cannot be empty.";if(l.La("DEFAULT"))throw"Duplicate policyName [DEFAULT].";Aa.DEFAULT=a};l.La=function(a){for(var b in Aa)if(a==b)return!0;return!1};l.Ka=function(a){return a&&l.La(a)?a:"DEFAULT"};l.gb=function(a){return Aa[l.Ka(a)]};
l.w=function(a,b,c,f){return l.gb(f).w(a,b,c)};l.Hb=function(a,b,c,f){if(!l.w(a,b,c,f))throw"permission_error";};var Ba=function(){};t(Ba,za);Ba.prototype.w=function(a,b,c){a=c?this.qa(a):this.ra(a);return 0<=q(a,b)};Ba.prototype.ra=function(a){var b=[];if(a&&(b.push(a),"http://"==a.substring(0,7)||"https://"==a.substring(0,8))){var c=document.createElement("a");c.href=a;a!=c.protocol+"//"+c.hostname&&b.push(c.protocol+"//"+c.hostname);"https:"==c.protocol&&b.push("http://"+c.hostname)}return b};
Ba.prototype.qa=function(a){var b=[];if(a){b.push(a);var c=document.createElement("a");c.href=a;if("http:"==c.protocol||"https:"==c.protocol)for(a=c.hostname.split(".");1<a.length;)b.push(c.protocol+"//"+a.join(".")),"https:"==c.protocol&&b.push("http://"+a.join(".")),a.shift()}return b};var F=function(){};t(F,za);F.prototype.w=function(a,b,c){a=c?this.qa(a):this.ra(a);return 0<=q(a,b)};
F.prototype.ra=function(a){var b=[];if(a&&(b.push(a),"https://"==a.substring(0,8))){var c=document.createElement("a");c.href=a;""!=c.port&&0!=c.port&&443!=c.port||b.push("http://"+c.hostname)}return b};
F.prototype.qa=function(a){var b=[];if(a){var c=document.createElement("a");c.href=a;if("https:"==c.protocol&&(""==c.port||0==c.port||443==c.port)||"http:"==c.protocol&&(""==c.port||0==c.port||80==c.port))for(a=c.hostname.split(".");1<a.length;)b.push(c.protocol+"//"+a.join(".")),"https:"==c.protocol&&b.push("http://"+a.join(".")),a.shift();else b.push(a)}return b};l.tb();l.C={K:"sessionStorage",Ea:"localStorage",Fb:"indexedDB"};var Ca=function(){};Ca.prototype.H=function(){return l.C.K};
var G=function(a){return a.H()==l.C.K?window.sessionStorage:l.Z};h=Ca.prototype;h.g=function(){throw Error("unimplemented abstract method");};h.G=function(){throw Error("unimplemented abstract method");};h.m=function(){throw Error("unimplemented abstract method");};h.la=function(){throw Error("unimplemented abstract method");};h.j=function(){throw Error("unimplemented abstract method");};h.ma=function(){throw Error("unimplemented abstract method");};var H=function(){};t(H,Ca);
H.prototype.m=function(a,b){if(this.H()!=l.C.K)throw Error("The sync version getValue() can only be used by sessionStorage.");var c;a=this.g(a);var f=G(this).getItem(a);if(f)try{var d=window.JSON.parse(f);d.cookieHash!=b?G(this).removeItem(a):c=d&&d.cachedValue}catch(g){}return c};H.prototype.la=function(a,b,c){var f=this,d=this.g(a);G(this).getItem(d,function(a){var e;if(a)try{var g=window.JSON.parse(a);if(g.cookieHash!=b){G(f).removeItem(d,function(){c(void 0)});return}e=g&&g.cachedValue}catch(n){}c(e)})};
H.prototype.j=function(a,b,c){if(this.H()!=l.C.K)throw Error("The sync version setValue() can only be used by sessionStorage.");a=this.g(a);void 0===b||null===b?G(this).removeItem(a):G(this).setItem(a,JSON.stringify({cookieHash:c,cachedValue:b}))};H.prototype.ma=function(a,b,c,f){a=this.g(a);void 0===b||null===b?G(this).removeItem(a,f):(b=JSON.stringify({cookieHash:c,cachedValue:b}),G(this).setItem(a,b,f))};var I=function(){};t(I,Ca);
I.prototype.m=function(a){if(this.H()!=l.C.K)throw Error("The sync version getValue() can only be used by sessionStorage.");var b;if(a=G(this).getItem(this.g(a)))try{var c=window.JSON.parse(a);b=c&&c.cachedValue}catch(f){}return b};I.prototype.la=function(a,b,c){G(this).getItem(this.g(a),function(a){var b;if(a)try{var f=window.JSON.parse(a);b=f&&f.cachedValue}catch(e){}c(b)})};
I.prototype.j=function(a,b){if(this.H()!=l.C.K)throw Error("The sync version setValue() can only be used by sessionStorage.");a=this.g(a);void 0===b||null===b?G(this).removeItem(a):G(this).setItem(a,JSON.stringify({cachedValue:b}))};I.prototype.ma=function(a,b,c,f){a=this.g(a);void 0===b||null===b?G(this).removeItem(a,f):(b=JSON.stringify({cachedValue:b}),G(this).setItem(a,b,f))};var J=function(){};t(J,I);J.prototype.H=function(){return l.C.Ea};J.prototype.g=function(a){return[B.fa,a.origin,a.a,a.id].join(B.l)};
J.prototype.G=function(a){var b={};a&&(a=a.split(B.l),4==a.length&&(b.origin=a[1],b.a=a[2],b.id=a[3]));return b};var Da=function(){};t(Da,H);Da.prototype.g=function(a){return[B.Ba,a.origin,a.a].join(B.l)};Da.prototype.G=function(a){a=a.split(B.l);var b={};3==a.length&&(b.origin=a[1],b.a=a[2]);return b};var K=function(){};t(K,H);K.prototype.g=function(a){return[B.Ua,a.origin,a.a].join(B.l)};
K.prototype.m=function(a,b){var c;(b=H.prototype.m.call(this,a,b))&&b.expires_at&&(6E4>b.expires_at-(new Date).getTime()?window.sessionStorage.removeItem(this.g(a)):ga(b.scope,a.scope)&&ga(a.scope,b.scope)?(c=b,c.expires_in=Math.floor((c.expires_at-(new Date).getTime())/1E3)):window.sessionStorage.removeItem(this.g(a)));return c};K.prototype.j=function(a,b,c){var f;b&&b.expires_at&&18E4<b.expires_at-(new Date).getTime()&&(f=b);H.prototype.j.call(this,a,f,c)};var L=function(){};t(L,I);
L.prototype.H=function(){return l.C.Ea};L.prototype.g=function(a){return[B.ka,a.domain,a.U?"1":"0",l.Ka(a.I),a.id||B.ha].join(B.l)};L.prototype.G=function(a){a=a.split(B.l);var b={};5==a.length&&(b.domain=a[1],b.U="1"==a[2],b.I=a[3],b.id=a[4]);"DEFAULT"==b.I&&delete b.I;b.id==B.ha&&delete b.id;return b};var M=function(a){this.qb=a||B.Ga};t(M,H);M.prototype.g=function(a){return[this.qb,a.origin,a.a,a.id||B.Ca].join(B.l)};
M.prototype.m=function(a,b){if((b=H.prototype.m.call(this,a,b))&&b.R&&b.R.expires_at){if(a.nb==b.R.login_hint&&!(6E4>b.R.expires_at-(new Date).getTime())&&ga(b.R.scope,a.scope)&&ga(b.responseType,a.responseType))return a=b.R,a.expires_in=Math.floor((a.expires_at-(new Date).getTime())/1E3),a;window.sessionStorage.removeItem(this.g(a))}};M.prototype.j=function(a,b,c){var f;b&&b.expires_at&&18E4<b.expires_at-(new Date).getTime()&&(f={R:b,responseType:a.responseType});H.prototype.j.call(this,a,f,c)};
var Ea=function(a,b){this.b=a;this.va=b;this.Y={};this.X={}},Fa=function(a,b){if(!b)throw"message object cannot be null.";b.rpcToken=a.va;b=JSON.stringify(b);p("IDP IFrame sends message: "+b);window.parent.postMessage(b,a.b)},N=function(a,b,c){b&&Fa(a,{id:b,result:c})};
Ea.prototype.sb=function(a){if(a.source==window.parent&&a.origin==this.b){p("IDP Session State IFrame receive message:"+a.data);try{var b=window.JSON.parse(a.data)}catch(c){return}(b.rpcToken||this.va)&&b.rpcToken!=this.va?p("RPC token mismatch."):b&&b.method&&this.Y[b.method]?(a=this.Y[b.method],a.rpcIdRequired&&!b.id?p("Bad request."):a.validator&&!a.validator(b)?(p("Bad request."),Fa(this,{id:b.id,error:"Bad request."})):a.handler(b)):p("Bad request.")}};
var P=function(a,b){if(b&&b.type&&a.X[b.type]){var c=a.X[b.type].filter;c&&!c(b)||Fa(a,{method:"fireIdpEvent",params:b})}else p("Invalid event type.")},Ga=function(a,b){a.Y={};a.X={};if(b){if(b.rpcs)for(var c=0;c<b.rpcs.length;c++){var f=b.rpcs[c];if(!f.method||!f.handler)throw"Error in RPC policy: method or handler is empty.";if(a.Y[f.method])throw"Error in RPC policy: duplicate entry for RPC '"+f.method+"'.";a.Y[f.method]={handler:f.handler,rpcIdRequired:f.rpcIdRequired,validator:f.validator}}if(b.events)for(c=
0;c<b.events.length;c++){f=b.events[c];if(!f.type)throw"Error in Event policy: type is empty.";if(a.X[f.type])throw"Error in Event policy: duplicate entry for type '"+f.type+"'.";a.X[f.type]={filter:f.filter}}}},Ha=function(a,b,c,f){P(a,{type:"sessionStateChanged",clientId:b,user:c,sessionState:f})},Ia=function(a){var b=new L,c=B.ka+B.l;return function(f){if(f.key&&0===f.key.indexOf(c)){var d=b.G(f.key);if(l.w(a.b,d.domain,d.U,d.I)){var g;if(f.newValue)try{var e=JSON.parse(f.newValue);e&&(g=e.cachedValue)}catch(k){return}P(a,
{type:"sessionSelectorChanged",newValue:g,crossSubDomains:d.U,domain:d.domain,policy:d.I,id:d.id})}}}},Ja=function(a){var b=new J,c=[B.fa,a.b].join(B.l)+B.l;return function(f){if(!f.key&&ha()){var d,g=null,e=[];for(f=0;f<window.localStorage.length;f++){var k=window.localStorage.key(f);if(0===k.indexOf(c))if(g)e.push(k);else{var n=window.localStorage.getItem(k);e.push(k);if(n){try{d=window.JSON.parse(n)}catch(r){continue}d&&d.cachedValue&&(g=b.G(k),g={type:"authResult",clientId:g.a,id:g.id,authResult:d.cachedValue})}}}for(f=
0;f<e.length;f++)window.localStorage.removeItem(e[f]);(d=g)&&P(a,d)}else if(f.key&&0===f.key.indexOf(c)&&f.newValue){try{e=window.JSON.parse(f.newValue)}catch(r){return}e&&e.cachedValue&&(d=b.G(f.key),d={type:"authResult",clientId:d.a,id:d.id,authResult:e.cachedValue},P(a,d))}}},Ka=function(a,b){this.b=a;this.v=b;this.Ia=new Da;this.Pa=new L;this.za=new M;this.O=new K},La=function(a,b,c,f){a.Ia.j({origin:a.b,a:b},{user:c.B,session:c.B?c.J:void 0},f)},Ma=function(a,b){return a.Ia.m({origin:a.b,a:b},
D(a.v))},Na=function(a,b,c,f,d,g){return a.za.m({nb:b,origin:a.b,a:c,responseType:f,scope:d,id:g},D(a.v))},Oa=function(a,b,c,f,d,g){if(!a.w(b,c,d))throw"Permission denied for '"+a.b+"' to read session selector for domain '"+b+"'.";a.Pa.la({domain:b,U:c,I:d,id:f},void 0,function(a){g(a)})},Pa=function(a,b,c,f,d,g,e){if(!a.w(b,c,g))throw"Permission denied for '"+a.b+"' to write session selector for domain '"+b+"'.";a.Pa.ma({domain:b,U:c,I:g,id:d},f,void 0,e)};
Ka.prototype.w=function(a,b,c){return l.w(this.b,a,b,c)};
var Qa=function(a,b,c){return a.O.m({origin:a.b,a:b,scope:c},D(a.v))},Ra=function(a,b,c){this.M=a;this.c=b;this.h=c},Sa=function(a,b,c){a.B?c&&void 0!==c[a.B]?(c=c[a.B],oa(a.J,c)||(a.J=c,La(a.h,a.M,a,b),Ha(a.c,a.M,a.B,a.J))):a.J&&(a.J=void 0,La(a.h,a.M,a,b),Ha(a.c,a.M,a.B,void 0)):b&&Ha(a.c,a.M,a.B,void 0)},Ua=function(a,b,c,f){this.v=a;this.c=b;this.f=c;this.h=f;this.W=void 0;this.u={};this.wa=[];var d=this;this.v.addListener(function(a){Ta(d,a)})},Va=function(a){var b=[],c;for(c in a.u){var f=a.u[c].B;
f&&b.push(f)}return b},Ta=function(a,b){if(b.newHash)va(a.f,Va(a),function(c){for(var d in a.u)Sa(a.u[d],b.newHash,c&&c.activeHints)});else for(var c in a.u)Sa(a.u[c],b.newHash,void 0)},Wa=function(a,b,c,f){var d=a.u[b];d||(d=new Ra(b,a.c,a.h),a.u[b]=d);a=d;b=c.login_hint;c=c.session_state;a.B!=b&&(a.B=b,a.J=b?c:void 0,La(a.h,a.M,a,f))},Xa=function(a,b,c){var f=a.u[b];if(f)c(!0);else{var d=Ma(a.h,b);d?(f=new Ra(b,a.c,a.h),a.u[b]=f,f.B=d.user,f.J=d.session,c(!0)):ua(a.f,b,function(d){d&&d.valid?(d=
new Ra(b,a.c,a.h),a.u[b]=d,La(a.h,b,d,D(a.v)),c(!0)):c(!1)})}},Ya=function(a,b){ia()||ja()||ka()?a.wa.push(b):fa(ha()?document:window,"storage",b)},Q=function(a,b,c){this.b=a;this.c=new Ea(a,b);this.v=new pa(B.ja,B.Ta);this.f=new sa(a,c);this.h=new Ka(a,this.v);this.D=new Ua(this.v,this.c,this.f,this.h)};h=Q.prototype;
h.start=function(){Ga(this.c,this.na());var a=this;fa(window,"message",function(){a.c.sb.apply(a.c,arguments)});Ya(this.D,Ia(this.c));Ya(this.D,Ja(this.c));ra(this.v);var b=function(){P(a.c,{type:"idpReady"});p("Initialize IDP IFrame successfully.")};ia()||ja()?(l.Z=new x,l.Z.V(b)):(l.Z=new w,l.Z.V(void 0),b())};h.ob=function(a){var b=this;Xa(this.D,(a.params||{}).clientId,function(c){N(b.c,a.id,c)})};
h.ab=function(a){var b=a.params||{},c=this,f=b.clientId,d=b.loginHint,g=b.request,e=b.sessionSelector;g.client_id=f;g.login_hint=d;g.ss_domain=e.domain;var k=D(this.v);if(k){if(!b.forceRefresh&&(d=Na(this.h,d,f,g.response_type,g.scope,b.id))&&18E4<d.expires_at-(new Date).getTime()){Wa(this.D,f,d,k);N(c.c,a.id,d);return}wa(this.f,g,function(d){if(d&&!d.error&&d.login_hint){d.first_issued_at=(new Date).getTime();d.expires_at=d.first_issued_at+1E3*d.expires_in;d.session_state||(d.session_state={});d.scope||
(d.scope=g.scope);var e=c.h;e.za.j({origin:e.b,a:f,responseType:g.response_type,id:b.id},d,k);Wa(c.D,f,d,k)}d=d||{};N(c.c,a.id,d)})}else N(c.c,a.id,{error:"user_logged_out"})};h.ub=function(a){var b=a.params||{},c=b.clientId,f=this;ya(this.f,b.token,function(b){var d=f.h;window.sessionStorage.removeItem(d.za.g({origin:d.b,a:c}));N(f.c,a.id,b)})};
h.Cb=function(a){if(ia()||ja()||ka()){var b=a.params||{},c=(new J).g({a:b.clientId,id:b.id,origin:b.origin}),b=this.D;if(ia()||ja()||ka()){b.W&&b.W.stop();b.W=new A(c);for(c=0;c<b.wa.length;c++)b.W.addListener(b.wa[c]);b.W.start()}}N(this.c,a.id,!0)};h.$a=function(a){var b=this,c=a.params||{};Oa(this.h,c.domain,c.crossSubDomains,c.id,c.policy,function(c){N(b.c,a.id,c)})};
h.Ab=function(a){var b=a.params||{},c=b.hint,f=!!b.disabled,d=b.domain,g=b.crossSubDomains,e=b.id,k=b.policy,n=this,r;if(c||f)r={hint:c,disabled:f};Pa(this.h,d,g,r,e,k,function(){P(n.c,{type:"sessionSelectorChanged",newValue:r,domain:d,crossSubDomains:g,id:e,policy:k});N(n.c,a.id,!0)})};
h.lb=function(a){var b=a.params||{},c=this,f=function(b){N(c.c,a.id,b)},d=b.clientId,g=b.request,e=b.sessionSelector;g.client_id=d;g.response_type="id_token";g.ss_domain=e.domain;var k=D(this.v);if(k){if(!b.forceRefresh&&(b=Qa(this.h,d,g.scope))){f(b);return}xa(this.f,g,function(a){if(a&&!a.error){a.first_issued_at=(new Date).getTime();a.expires_at=a.first_issued_at+1E3*a.expires_in;a.scope=g.scope;var b=c.h;b.O.j({origin:b.b,a:d},a,k)}a=a||{error:"No response returned from Server."};f(a)})}else f({scope:g.scope,
sessions:[]})};h.pb=function(a){a=a&&a.params||{};return a.clientId&&!C(a.clientId)};h.jb=function(a){var b=a&&a.params||{};a=b.loginHint;var c=!C(b.id),f=b.clientId&&!C(b.clientId),d=!!b.request,g=d&&b.request.scope;(b=(d=d&&b.request.response_type)&&0<=b.request.response_type.indexOf("code"))&&p("Bad request: 'code' response_type is not supported.");return a&&c&&f&&g&&d&&!b};
h.ib=function(a){a=a&&a.params||{};var b=a.domain&&!C(a.domain),c=!C(a.policy);return!C(a.id)&&b&&c&&this.h.w(a.domain,!!a.crossSubDomains,a.policy)};h.Bb=function(a){a=a&&a.params||{};var b=a.domain&&!C(a.domain),c=!C(a.policy);return!C(a.id)&&b&&c&&this.h.w(a.domain,!!a.crossSubDomains,a.policy)&&B.Xa(a)};h.mb=function(a){a=a&&a.params||{};var b=a.clientId&&!C(a.clientId),c=!!a.request&&a.request.scope;return!C(a.id)&&b&&c};
h.xb=function(a){a=a&&a.params||{};var b=!!a.token,c=a.clientId&&!C(a.clientId);return!C(a.id)&&b&&c};h.Db=function(a){a=a&&a.params||{};var b=a.origin&&!C(a.origin),c=a.id&&!C(a.id);return a.clientId&&!C(a.clientId)&&b&&c};h.zb=function(a){var b;if(b=a.clientId)a=a.clientId,b=!(!a||!this.D.u[a]);return b};h.Ya=function(a){var b;if(b=a.clientId)b=a.clientId,b=!(!b||!this.D.u[b]);return b&&a.id&&a.authResult};h.yb=function(a){return a.domain&&this.h.w(a.domain,a.crossSubDomains,a.policy)};
var R=function(a,b){return function(){return b.apply(a,arguments)}};Q.prototype.na=function(){var a={rpcs:[],events:[]};Za(this,a);return a};
var Za=function(a,b){b.rpcs.push({method:"monitorClient",handler:R(a,a.ob),rpcIdRequired:!1,validator:R(a,a.pb)});b.rpcs.push({method:"getTokenResponse",handler:R(a,a.ab),rpcIdRequired:!0,validator:R(a,a.jb)});b.rpcs.push({method:"getSessionSelector",handler:R(a,a.$a),rpcIdRequired:!0,validator:R(a,a.ib)});b.rpcs.push({method:"setSessionSelector",handler:R(a,a.Ab),rpcIdRequired:!1,validator:R(a,a.Bb)});b.rpcs.push({method:"listIdpSessions",handler:R(a,a.lb),rpcIdRequired:!0,validator:R(a,a.mb)});
b.rpcs.push({method:"revoke",handler:R(a,a.ub),validator:R(a,a.xb)});b.rpcs.push({method:"startPolling",handler:R(a,a.Cb),validator:R(a,a.Db)});b.events.push({type:"idpReady"});b.events.push({type:"sessionStateChanged",filter:R(a,a.zb)});b.events.push({type:"sessionSelectorChanged",filter:R(a,a.yb)});b.events.push({type:"authResult",filter:R(a,a.Ya)})};var $a=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,$a);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};ba($a,Error);var ab=function(a,b){for(var c=a.split("%s"),f="",d=Array.prototype.slice.call(arguments,1);d.length&&1<c.length;)f+=c.shift()+d.shift();return f+c.join("%s")};var bb=function(a,b){b.unshift(a);$a.call(this,ab.apply(null,b));b.shift()};ba(bb,$a);var cb=function(a,b,c){if(!a){var f="Assertion failed";if(b)var f=f+(": "+b),d=Array.prototype.slice.call(arguments,2);throw new bb(""+f,d||[]);}};var db=function(a){for(var b=[],c=0,f=0;f<a.length;f++){for(var d=a.charCodeAt(f);255<d;)b[c++]=d&255,d>>=8;b[c++]=d}return b};var eb=null;var fb=function(){this.s=-1};var S=function(a,b,c){this.s=-1;this.A=a;this.s=c||a.s||16;this.Ma=Array(this.s);this.ua=Array(this.s);a=b;a.length>this.s&&(this.A.update(a),a=this.A.digest(),this.A.reset());for(c=0;c<this.s;c++)b=c<a.length?a[c]:0,this.Ma[c]=b^92,this.ua[c]=b^54;this.A.update(this.ua)};ba(S,fb);S.prototype.reset=function(){this.A.reset();this.A.update(this.ua)};S.prototype.update=function(a,b){this.A.update(a,b)};
S.prototype.digest=function(){var a=this.A.digest();this.A.reset();this.A.update(this.Ma);this.A.update(a);return this.A.digest()};var T=function(){this.s=64;this.i=Array(4);this.Za=Array(this.s);this.ea=this.T=0;this.reset()};ba(T,fb);T.prototype.reset=function(){this.i[0]=1732584193;this.i[1]=4023233417;this.i[2]=2562383102;this.i[3]=271733878;this.ea=this.T=0};
var gb=function(a,b,c){c||(c=0);var f=Array(16);if("string"==typeof b)for(var d=0;16>d;++d)f[d]=b.charCodeAt(c++)|b.charCodeAt(c++)<<8|b.charCodeAt(c++)<<16|b.charCodeAt(c++)<<24;else for(d=0;16>d;++d)f[d]=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;b=a.i[0];c=a.i[1];var d=a.i[2],g=a.i[3],e;e=b+(g^c&(d^g))+f[0]+3614090360&4294967295;b=c+(e<<7&4294967295|e>>>25);e=g+(d^b&(c^d))+f[1]+3905402710&4294967295;g=b+(e<<12&4294967295|e>>>20);e=d+(c^g&(b^c))+f[2]+606105819&4294967295;d=g+(e<<17&4294967295|e>>>15);
e=c+(b^d&(g^b))+f[3]+3250441966&4294967295;c=d+(e<<22&4294967295|e>>>10);e=b+(g^c&(d^g))+f[4]+4118548399&4294967295;b=c+(e<<7&4294967295|e>>>25);e=g+(d^b&(c^d))+f[5]+1200080426&4294967295;g=b+(e<<12&4294967295|e>>>20);e=d+(c^g&(b^c))+f[6]+2821735955&4294967295;d=g+(e<<17&4294967295|e>>>15);e=c+(b^d&(g^b))+f[7]+4249261313&4294967295;c=d+(e<<22&4294967295|e>>>10);e=b+(g^c&(d^g))+f[8]+1770035416&4294967295;b=c+(e<<7&4294967295|e>>>25);e=g+(d^b&(c^d))+f[9]+2336552879&4294967295;g=b+(e<<12&4294967295|
e>>>20);e=d+(c^g&(b^c))+f[10]+4294925233&4294967295;d=g+(e<<17&4294967295|e>>>15);e=c+(b^d&(g^b))+f[11]+2304563134&4294967295;c=d+(e<<22&4294967295|e>>>10);e=b+(g^c&(d^g))+f[12]+1804603682&4294967295;b=c+(e<<7&4294967295|e>>>25);e=g+(d^b&(c^d))+f[13]+4254626195&4294967295;g=b+(e<<12&4294967295|e>>>20);e=d+(c^g&(b^c))+f[14]+2792965006&4294967295;d=g+(e<<17&4294967295|e>>>15);e=c+(b^d&(g^b))+f[15]+1236535329&4294967295;c=d+(e<<22&4294967295|e>>>10);e=b+(d^g&(c^d))+f[1]+4129170786&4294967295;b=c+(e<<
5&4294967295|e>>>27);e=g+(c^d&(b^c))+f[6]+3225465664&4294967295;g=b+(e<<9&4294967295|e>>>23);e=d+(b^c&(g^b))+f[11]+643717713&4294967295;d=g+(e<<14&4294967295|e>>>18);e=c+(g^b&(d^g))+f[0]+3921069994&4294967295;c=d+(e<<20&4294967295|e>>>12);e=b+(d^g&(c^d))+f[5]+3593408605&4294967295;b=c+(e<<5&4294967295|e>>>27);e=g+(c^d&(b^c))+f[10]+38016083&4294967295;g=b+(e<<9&4294967295|e>>>23);e=d+(b^c&(g^b))+f[15]+3634488961&4294967295;d=g+(e<<14&4294967295|e>>>18);e=c+(g^b&(d^g))+f[4]+3889429448&4294967295;c=
d+(e<<20&4294967295|e>>>12);e=b+(d^g&(c^d))+f[9]+568446438&4294967295;b=c+(e<<5&4294967295|e>>>27);e=g+(c^d&(b^c))+f[14]+3275163606&4294967295;g=b+(e<<9&4294967295|e>>>23);e=d+(b^c&(g^b))+f[3]+4107603335&4294967295;d=g+(e<<14&4294967295|e>>>18);e=c+(g^b&(d^g))+f[8]+1163531501&4294967295;c=d+(e<<20&4294967295|e>>>12);e=b+(d^g&(c^d))+f[13]+2850285829&4294967295;b=c+(e<<5&4294967295|e>>>27);e=g+(c^d&(b^c))+f[2]+4243563512&4294967295;g=b+(e<<9&4294967295|e>>>23);e=d+(b^c&(g^b))+f[7]+1735328473&4294967295;
d=g+(e<<14&4294967295|e>>>18);e=c+(g^b&(d^g))+f[12]+2368359562&4294967295;c=d+(e<<20&4294967295|e>>>12);e=b+(c^d^g)+f[5]+4294588738&4294967295;b=c+(e<<4&4294967295|e>>>28);e=g+(b^c^d)+f[8]+2272392833&4294967295;g=b+(e<<11&4294967295|e>>>21);e=d+(g^b^c)+f[11]+1839030562&4294967295;d=g+(e<<16&4294967295|e>>>16);e=c+(d^g^b)+f[14]+4259657740&4294967295;c=d+(e<<23&4294967295|e>>>9);e=b+(c^d^g)+f[1]+2763975236&4294967295;b=c+(e<<4&4294967295|e>>>28);e=g+(b^c^d)+f[4]+1272893353&4294967295;g=b+(e<<11&4294967295|
e>>>21);e=d+(g^b^c)+f[7]+4139469664&4294967295;d=g+(e<<16&4294967295|e>>>16);e=c+(d^g^b)+f[10]+3200236656&4294967295;c=d+(e<<23&4294967295|e>>>9);e=b+(c^d^g)+f[13]+681279174&4294967295;b=c+(e<<4&4294967295|e>>>28);e=g+(b^c^d)+f[0]+3936430074&4294967295;g=b+(e<<11&4294967295|e>>>21);e=d+(g^b^c)+f[3]+3572445317&4294967295;d=g+(e<<16&4294967295|e>>>16);e=c+(d^g^b)+f[6]+76029189&4294967295;c=d+(e<<23&4294967295|e>>>9);e=b+(c^d^g)+f[9]+3654602809&4294967295;b=c+(e<<4&4294967295|e>>>28);e=g+(b^c^d)+f[12]+
3873151461&4294967295;g=b+(e<<11&4294967295|e>>>21);e=d+(g^b^c)+f[15]+530742520&4294967295;d=g+(e<<16&4294967295|e>>>16);e=c+(d^g^b)+f[2]+3299628645&4294967295;c=d+(e<<23&4294967295|e>>>9);e=b+(d^(c|~g))+f[0]+4096336452&4294967295;b=c+(e<<6&4294967295|e>>>26);e=g+(c^(b|~d))+f[7]+1126891415&4294967295;g=b+(e<<10&4294967295|e>>>22);e=d+(b^(g|~c))+f[14]+2878612391&4294967295;d=g+(e<<15&4294967295|e>>>17);e=c+(g^(d|~b))+f[5]+4237533241&4294967295;c=d+(e<<21&4294967295|e>>>11);e=b+(d^(c|~g))+f[12]+1700485571&
4294967295;b=c+(e<<6&4294967295|e>>>26);e=g+(c^(b|~d))+f[3]+2399980690&4294967295;g=b+(e<<10&4294967295|e>>>22);e=d+(b^(g|~c))+f[10]+4293915773&4294967295;d=g+(e<<15&4294967295|e>>>17);e=c+(g^(d|~b))+f[1]+2240044497&4294967295;c=d+(e<<21&4294967295|e>>>11);e=b+(d^(c|~g))+f[8]+1873313359&4294967295;b=c+(e<<6&4294967295|e>>>26);e=g+(c^(b|~d))+f[15]+4264355552&4294967295;g=b+(e<<10&4294967295|e>>>22);e=d+(b^(g|~c))+f[6]+2734768916&4294967295;d=g+(e<<15&4294967295|e>>>17);e=c+(g^(d|~b))+f[13]+1309151649&
4294967295;c=d+(e<<21&4294967295|e>>>11);e=b+(d^(c|~g))+f[4]+4149444226&4294967295;b=c+(e<<6&4294967295|e>>>26);e=g+(c^(b|~d))+f[11]+3174756917&4294967295;g=b+(e<<10&4294967295|e>>>22);e=d+(b^(g|~c))+f[2]+718787259&4294967295;d=g+(e<<15&4294967295|e>>>17);e=c+(g^(d|~b))+f[9]+3951481745&4294967295;a.i[0]=a.i[0]+b&4294967295;a.i[1]=a.i[1]+(d+(e<<21&4294967295|e>>>11))&4294967295;a.i[2]=a.i[2]+d&4294967295;a.i[3]=a.i[3]+g&4294967295};
T.prototype.update=function(a,b){void 0===b&&(b=a.length);for(var c=b-this.s,f=this.Za,d=this.T,g=0;g<b;){if(0==d)for(;g<=c;)gb(this,a,g),g+=this.s;if("string"==typeof a)for(;g<b;){if(f[d++]=a.charCodeAt(g++),d==this.s){gb(this,f);d=0;break}}else for(;g<b;)if(f[d++]=a[g++],d==this.s){gb(this,f);d=0;break}}this.T=d;this.ea+=b};
T.prototype.digest=function(){var a=Array((56>this.T?this.s:2*this.s)-this.T);a[0]=128;for(var b=1;b<a.length-8;++b)a[b]=0;for(var c=8*this.ea,b=a.length-8;b<a.length;++b)a[b]=c&255,c/=256;this.update(a);a=Array(16);for(b=c=0;4>b;++b)for(var f=0;32>f;f+=8)a[c++]=this.i[b]>>>f&255;return a};var ib=function(a,b,c){b.origin=a.b;b.privileged=!0;b.redirect_uri=void 0;b.response_type=void 0;E(B.ia,b,hb(a),c,!1)},jb=function(a,b,c,f){E((window.NOW_SERVER_BASE_URL||"https://clients1.google.com")+"/nowapi/webauth",{origin:a.b,client_id:b,user_ids:c.join(";")},hb(a),f,!0)},kb=function(a,b,c){E("/o/oauth2/auth",{origin:a.b,client_id:b.client_id,login_hint:b.login_hint,response_type:"code",access_type:"offline",scope:"https://www.googleapis.com/auth/googlenow.publish",redirect_uri:"xhr",timestamp:b.timestamp,
signature:b.signature,signed_by:"google_now"},hb(a),c,!1)},U=function(a,b,c){E((window.NOW_SERVER_BASE_URL||"https://clients1.google.com")+"/nowapi/webAuthApiAnalytics",{origin:a.b,client_id:b,status:c},hb(a),function(){},!0)},hb=function(a){var b={},c=m.N(B.hb());if(c){a=a.b;if(!a||!c)throw Error("RP origin and session cookie value cannot be empty.");c=new S(new T,db(c));a=db(a);c.reset();c.update(a);c=c.digest();a=aa(c);cb("array"==a||"object"==a&&"number"==typeof c.length,"encodeByteArray takes an array as a parameter");
if(!eb)for(eb={},a=0;65>a;a++)eb[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a);a=eb;for(var f=[],d=0;d<c.length;d+=3){var g=c[d],e=d+1<c.length,k=e?c[d+1]:0,n=d+2<c.length,r=n?c[d+2]:0,O=g>>2,g=(g&3)<<4|k>>4,k=(k&15)<<2|r>>6,r=r&63;n||(r=64,e||(k=64));f.push(a[O],a[g],a[k],a[r])}b["X-Csrf-Token"]=f.join("")}return b};var V=function(){};t(V,I);V.prototype.g=function(a){return["now_as",a.S,a.a||"ALL_CLIENTS"].join(B.l)};V.prototype.G=function(a){var b={};if(a){a=a.split(B.l);if("now_as"!==a[0]||3!=a.length)throw Error("Invalid assertion cache key.");b.S=a[1];b.a="ALL_CLIENTS"==a[2]?void 0:a[2]}return b};V.prototype.m=function(a,b){var c;(b=I.prototype.m.call(this,a,b))&&b.e&&(b.e<(new Date).getTime()?G(this).removeItem(this.g(a)):c=b.o);return c};
V.prototype.j=function(a,b,c){if(void 0!==b){var f=!!b;if(f&&!a.a)throw Error("Cannot cache all clients enabled for a user.");b={};b.o=f;b.e=(new Date).getTime()+864E5}I.prototype.j.call(this,a,b,c)};var W=function(){};t(W,H);W.prototype.g=function(a){return["now_gs",a.origin,a.a].join(B.l)};W.prototype.m=function(a,b){var c;(b=H.prototype.m.call(this,a,b))&&b.expires_at&&(b.expires_at<=(new Date).getTime()?G(this).removeItem(this.g(a)):(b.expires_at=void 0,c=b));return c};W.prototype.j=function(a,b,c){b&&(b.expires_at=(new Date).getTime()+864E5);H.prototype.j.call(this,a,b,c)};Q.prototype.bb=function(a){var b=this;if(!lb(this,"getCode",a.id)){var c=mb(this,a);3<c.pa.length?(X(c,"THROTTLED","At most 3 email addresses can be used."),U(this.f,c.a,1)):c.$?nb(this,c,!1,function(a){var d;try{d=ob(b,c,a)}catch(g){if("AUTH_EXISTS"==g.message){X(c,"AUTHORIZATION_EXISTS","Authorization already granted for the user.");U(b.f,c.a,3);return}throw g;}d.length?pb(b,c,d,function(a){qb(b,c,a.auth_request)}):(X(c,"DISABLED"),U(b.f,c.a,4))}):(X(c,"DISABLED"),U(this.f,c.a,2))}};
Q.prototype.vb=function(a){var b=this;if(!lb(this,"revokeNow",a.id)){var c=mb(this,a);3<c.pa.length&&X(c,"THROTTLED","At most 3 email addresses can be used.");c.$?nb(this,c,!0,function(a){a=ob(b,c,a,!0);if(a.length)for(var d=a.length,f=0;f<a.length;f++)rb(b,c.a,a[f],function(a){(a=a&&a.access_token)?ya(b.f,a,function(){d--;d||c.P({})}):(d--,d||c.P({}))});else c.P({})}):c.P({})}};
var lb=function(a,b,c){a.ta=a.ta||{};if(!a.ta[b])return a.ta[b]=!0,!1;N(a.c,c,{error:"THROTTLED",detail:"The "+b+"() method has already been invoked."});return!0},mb=function(a,b){var c=b.params||{},f={a:c.clientId,pa:c.emails,P:function(c){N(a.c,b.id,c)}};f.$=D(a.v);f.Qa={origin:a.b,a:c.clientId};return f},nb=function(a,b,c,f){a.O||(a.O=new W);if(!c&&(c=a.O.m(b.Qa,b.$))){f(c);return}ib(a.f,{client_id:b.a,scope:"https://www.googleapis.com/auth/googlenow.publish"},function(c){c&&c.sessions?(a.O.j(b.Qa,
c,b.$),f(c)):X(b,"OTHER","Failed to get Google session information.")})},ob=function(a,b,c,f){a.L||(a.L=new V);var d=[];if(c.sessions)for(var g=0;g<c.sessions.length;g++){var e=c.sessions[g],k;if(k=e.emails)a:{k=b.pa;for(var n=e.emails,r=0;r<k.length;r++)for(var O=0;O<n.length;O++)if(k[r]&&n[O]&&k[r].toLowerCase()===n[O].toLowerCase()){k=!0;break a}k=!1}if(k)if(f)e.login_hint&&d.push(e.login_hint);else{if(e.login_hint)throw Error("AUTH_EXISTS");if(e.obfuscatedGaiaId){k=a.L;n=e.obfuscatedGaiaId;r=
{S:n,a:b.a};if(k=!1===k.m({S:n})?!1:k.m(r))throw Error("AUTH_EXISTS");void 0===k&&d.push(e.obfuscatedGaiaId)}}}return d},pb=function(a,b,c,f){a.L||(a.L=new V);jb(a.f,b.a,c,function(d){if(d&&"DISABLED"!=d.status)if("THROTTLED"==d.status)X(b,"THROTTLED","Throttled by Google Now server."),U(a.f,b.a,7);else{var g;if(g="OK"==d.status)g=d.auth_request,g=!!g&&g.origin==a.b&&g.client_id==b.a&&0<g.timestamp&&!!g.signature&&"google_now"==g.signed_by&&0<=q(c,g.login_hint);if(g){g=a.L;var e=d.auth_request.login_hint,
k=b.a;g.j({S:e});g.j({S:e,a:k},!0);f(d)}else X(b,"OTHER","Unexpected response from Google Now server."),U(a.f,b.a,8)}else{e=g=!1;if(d.users&&d.users.length)for(k=0;k<d.users.length;k++){var n=d.users[k];n.user_id&&(a.L.j({S:n.user_id,a:n.disabled_for_all_clients?void 0:b.a},!1),n.disabled_for_all_clients?e=!0:g=!0)}X(b,"DISABLED");U(a.f,b.a,e&&!g?5:6)}})},qb=function(a,b,c){kb(a.f,c,function(c){c&&c.code?(b.P({code:c.code}),U(a.f,b.a,9)):c&&"immediate_failed"==c.error&&"policy_enforced"==c.error_subtype?
(X(b,"AUTHORIZATION_EXISTS","Failed to issue code due to existing authorization."),U(a.f,b.a,10)):(X(b,"OTHER",c.error||"Failed to get code."),U(a.f,b.a,11))})},rb=function(a,b,c,f){wa(a.f,{client_id:b,login_hint:c,response_type:"token",scope:"https://www.googleapis.com/auth/googlenow.publish"},f)},X=function(a,b,c){a.P({error:b,detail:c})};Q.prototype.cb=function(a){a=a&&a.params||{};var b=a.emails,b=b&&b.length&&"[object Array]"===Object.prototype.toString.call(b);return a.clientId&&!C(a.clientId)&&b};Q.prototype.wb=function(a){a=a&&a.params||{};var b=a.emails,b=b&&b.length&&"[object Array]"===Object.prototype.toString.call(b);return a.clientId&&!C(a.clientId)&&b};Q.prototype.na=function(){var a={rpcs:[],events:[]};sb(this,a);return a};
var sb=function(a,b){b.rpcs.push({method:"now:getCode",handler:R(a,a.bb),rpcIdRequired:!0,validator:R(a,a.cb)});b.rpcs.push({method:"now:revoke",handler:R(a,a.vb),rpcIdRequired:!0,validator:R(a,a.wb)})};Q.prototype.na=function(){var a={rpcs:[],events:[]};Za(this,a);sb(this,a);return a};B.ja="APISID";B.Fa="SAPISID";B.Ha="/o/oauth2/iframerpc?action=sessionState";B.Aa="/o/oauth2/iframerpc?action=checkOrigin";B.Da="/o/oauth2/iframerpc?action=issueToken";B.ia="/o/oauth2/iframerpc?action=listSessions";var tb=function(){var a=ea("origin");if(!a)throw"Failed to get parent origin from URL hash!";var b=ea("rpcToken");if(!b)throw"Failed to get rpcToken from URL hash!";var c=ea("debug");ca="0"!=c&&!!c;(new Q(a,b)).start()},Y=["lso","startIdpIFrame"],Z=this;
Y[0]in Z||!Z.execScript||Z.execScript("var "+Y[0]);for(var ub;Y.length&&(ub=Y.shift());)Y.length||void 0===tb?Z=Z[ub]?Z[ub]:Z[ub]={}:Z[ub]=tb;
